<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>QR Prank – Terms of Use</title>
<style>
  body {
    font-family: sans-serif;
    max-width: 600px;
    margin: 2rem auto;
    background: url('rick.gif') center center / cover no-repeat fixed;
    color: #fff;
  }
  textarea {
    width: 100%;
    height: 300px;
    color: #000;
    background: #fff;
    opacity: 0.9;
  }
  .controls { margin-top: 1rem; text-align: center; }
  #agreeBtn {
    padding: 0.6rem 1.2rem;
    font-size: 1rem;
    background: rgba(0,0,0,0.7);
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
  #agreeBtn:disabled { background: rgba(0,0,0,0.3); cursor: not-allowed; }
  #countdown { font-weight: bold; color: #ff0; text-align: center; }
</style>
</head>
<body>

<h1>QR Prank – Terms of Use</h1>

<textarea readonly>
[PASTE your Terms of Use text here]
</textarea>

<div class="controls">
  <p id="countdown">Please read the terms. You can agree in 10 seconds.</p>
  <button id="agreeBtn" disabled>I Agree</button>
</div>

<!-- Hidden Netlify form for logging -->
<form name="agreements" netlify netlify-honeypot="bot-field" hidden>
  <input type="hidden" name="timestamp" id="timestampField">
  <input type="hidden" name="userAgent" id="userAgentField">
</form>

<script>
/* ---------- check for previous consent ---------- */
const existing = localStorage.getItem("qrPrankAgreed");
if (existing) {
  // Already agreed → skip straight to download page
  window.location.href = "download.html";
}

/* ---------- countdown + new consent ---------- */
let seconds = 10;
const countdown = document.getElementById('countdown');
const agreeBtn  = document.getElementById('agreeBtn');

const timer = setInterval(() => {
  seconds--;
  if (seconds > 0) {
    countdown.textContent = `Please read the terms. You can agree in ${seconds} second${seconds===1?'':'s'}.`;
  } else {
    clearInterval(timer);
    countdown.textContent = "You may now click I Agree if you accept the terms.";
    agreeBtn.disabled = false;
  }
}, 1000);

/* ---------- handle agreement ---------- */
agreeBtn.addEventListener('click', () => {
  const consentData = {
    timestamp: new Date().toISOString(),
    userAgent: navigator.userAgent
  };

  // save locally so next time they’re auto-skipped
  localStorage.setItem("qrPrankAgreed", JSON.stringify(consentData));

  // fill Netlify form and submit it (for your dashboard logs)
  document.getElementById("timestampField").value = consentData.timestamp;
  document.getElementById("userAgentField").value = consentData.userAgent;
  document.forms["agreements"].submit();

  // redirect to download page
  window.location.href = "download.html";
});
</script>

</body>
</html>
